# 최단 경로

> 가장 짧은 경로를 찾는 알고리즘

- '길 찾기' 문제라고도 부름
- 최단 경로 알고리즘 유형에는 다양한 종류가 있음
- 상황에 맞는 효율적인 알고리즘이 정립되어 있음
- 보통 그래프로 표현해서 각 지점은 그래프에서 '노드'로 표현, 지점간 연결된 도로는 '간선'으로 표현
- 코딩테스트에서는 최단 경로를 모두 출력하는 문제보다는 최단 거리를 출력하도록 요구하는 문제가 많음

컴퓨터공학과 학부 수준에서 사용하는 최단 거리 알고리즘

- 다익스트라 최단 경로 알고리즘
- 플로이드 워셜 알고리즘
- 벨만 포드 알고리즘

이 책에서는 다익스트라 최단 경로와 플로이드 워셜 알고리즘 유형만 다룬다.

- 그리디 알고리즘과 다이나믹 프로그래밍 알고리즘이 최단 경로 알고리즘에 그대로 적용됨
- 최단 경로 문제는 그리디 알고리즘과 다이나믹 프로그래밍 알고리즘의 한 유형으로 볼 수 있음

## 다익스트라(Dijkstra) 최단 경로 알고리즘

- 그래프에서 여러 개의 노드가 있을 때, 특정한 노드에서 출발하여 다른 노드로 가는 각각의 최단 경로를 구해주는 알고리즘
- '음의 간선'이 없을 때 정상 동작
- 기본적으로 그리디 알고리즘: '가장 비용이 적은 노드'를 선택해서 임의의 과정을 반복

음의 간선

- 0보다 작은 값을 갖는 간선
- 현실 세계의 간선은 음의 간선이 아니므로 다익스트라 알고리즘은 GPS 소프트웨어의 기본 알고리즘으로 채택되곤 함

다익스트라 알고리즘의 원리

1. 출발 노드를 설정한다.
1. 최단 거리 테이블을 초기화한다.
1. 방문하지 않은 노드 중에서 최단 거리가 가장 짧은 노드를 선택한다.
1. 해당 노드를 거쳐 다른 노드로 가는 비용을 계산하여 최단 거리 테이블을 갱신한다.
1. 위 과정에서 3번과 4번을 반복한다.

다익스트라 알고리즘 특징

- 최단 경로를 구하는 과정에서 '각 노드에 대한 현재까지의 최단 거리' 정보를 항상 1차원 리스트에 저장하며 리스트를 계속 갱신
- '방문하지 않은 노드 중 가장 최단거리가 짧은 노드를 선택'하는 과정을 반복하는데, 이 선택된 노드들은 알고리즘을 반복해도 최단 거리가 줄어들지 않는다.
- 한 단계당 하나의 노드에 대한 최단 거리를 확실히 찾는 것으로 이해할 수 있음

구현 방법 2가지의 특징

- 구현하기 쉽지만 느리게 동작하는 코드
- 구현하기 조금 더 까다롭지만 빠르게 동작하는 코드

시험을 준비한다면 다익스트라 최단 경로 알고리즘은 숙달해야 한다.

### 간단한 다익스트라 알고리즘

- 시간복잡도 O(V^2). V는 노드의 개수
- 최단 거리를 담는 1차원 리스트를 선언 후, 단계마다 '방문하지 않은 노드 중에서 최단 거리가 가장 짧은 노드를 선택'하기 위해 매 단계마다 1차원 리스트의 모든 원소를 확인(순차 탐색)한다.
- 최단 경로 문제에서 전체 노드의 개수가 5,000개 이하라면 간단한 다익스트라 알고리즘 활용 가능.
- 10,000개를 넘어가는 문제라면 개선된 다익스트라 알고리즘을 이용해야 함

### 개선된 다익스트라 알고리즘

- 시간복잡도 O(ElogV). V는 노드의 개수, E는 간선의 개수
- 힙(Heap) 자료구조를 사용
- 특정 노드까지의 최단 거리에 대한 정보를 힙에 담아서 처리

힙 자료구조

- 우선순위 큐(Primary Queue)를 구현하기 위해 사용하는 자료구조 중 하나

우선 순위 큐

- 우선 순위가 가장 높은 데이터를 가장 먼저 삭제함
- 파이썬에서는 PriorityQueue 혹은 heapq 사용 가능
- heapq가 더 빠르게 동작하므로 수행시간이 제한된 상황에서는 heapq 권장
- 내부적으로 최소 힙(Min Heap) 또는 최대 힙(Max Heap)을 이용
- 최소 힙: 값이 가장 낮은 데이터가 먼저 삭제
- 최대 힙: 값이 가장 높은 데이터가 먼저 삭제
- 파이썬 라이브러리에서는 기본적으로 최소 힙 구조 사용

최소 힙을 최대 힙처럼 사용하기 위해서는 일부러 우선순위에 해당하는 값에 음수 부호(`-`)를 붙였다가 꺼낼때 다시 값을 되돌리는 방법을 사용한다.

개선된 다익스트라 알고리즘에서는 현재 가장 가까운 노드를 저장하기 위한 목적으로만 우선순위 큐를 추가로 이용한다. 최단 거리가 가장 짧은 노드를 선택하는 과정을 간단한 버전에서는 `get_smallest_node()`라는 함수로 처리했으나 개선 버전에서는 우선순위 큐를 이용한다.

## 플로이드 워셜 알고리즘

> '모든 지점에서 다른 모든 지점까지의 최단 경로를 모두 구해야 하는 경우'에 사용할 수 있는 알고리즘

- 단계마다 '거쳐 가는 노드'를 기준으로 알고리즘을 수행
- 노드의 개수가 N개일 때, 알고리즘상으로 N번의 단계를 수행하며, 단계마다 O(N^2)의 연산을 통해 '현재 노드를 거쳐 가는' 모든 경로를 고려
- 총시간 복잡도는 O(N^3)
- 2차원 리스트에 '최단 거리' 정보를 저장
- 다익스트라 알고리즘은 그리디 알고리즘인데 비해, 플로이드 워셜 알고리즘은 다이나믹 프로그래밍
- 노드의 개수가 N일 때, N번 만큼의 단계를 반복하며 '점화식에 맞게' 2차원 리스트를 갱신하므로 다이나믹 프로그래밍
